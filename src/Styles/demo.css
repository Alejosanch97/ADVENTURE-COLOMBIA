/*
|--------------------------------------------------------------------------
| CONFIGURACI칍N BASE Y VARIABLES
|--------------------------------------------------------------------------
*/

:root {
    /* ... (Colores de Fondo se mantienen) ... */
    --color-darkblue: #1a3a60;    
    --color-lightgreen: #aad48c;  
    --color-tan: #d1b499;         
    --color-lightblue: #728c9b;   
    --color-darkgreen: #113637;   
    --color-red: #5d0f19;         
    --color-orange: #55544f;      
    
    /* Variables para el Indicador Central */
    --indicator-size: 250px; /* Tama침o del c칤rculo (W/H) */
    --dot-offset: 125px;     /* Radio del c칤rculo (125px). DISTANCIA DE 칍RBITA. */
    --dot-size: 25px;        /* TAMA칌O DEL PUNTO */
    --border-size: 2px;      /* TAMA칌O DEL BORDE */

    /* FACTOR DE ESCALA: 1.8 */
    --dot-scale-factor: 1.5;

    /* Distancia para mover el punto desde el centro hacia arriba
       (Radio del c칤rculo - Mitad del tama침o del punto = 125px - 5px = 120px) */
    --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 10px); /* 120px */
    
    /* Colores de Texto Base */
    --text-color-light: white;
    --text-color-dark: #333; 
    --text-color-accent: #e7367c; 
    
    /* Color del t칤tulo fijo que resalta: Blanco */
    --title-fixed-color: white; 
    --title-fixed-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Montserrat', sans-serif; 
    overflow-x: hidden;
    background-color: #f8f8f8;
}

/*
|--------------------------------------------------------------------------
| SECCIONES DE SCROLL, CONTENIDO Y L칍GICA DE COLOR (MANTENIDOS)
|--------------------------------------------------------------------------
*/
.how-it-works-page {
    position: relative;
    width: 100%;
    min-height: 700vh; 
}

.steps-container {
    padding: 0; 
}

.step-section {
    height: 100vh; 
    display: flex;
    position: relative;
    margin: 0; 
    overflow: hidden;
}

/* Aplicaci칩n de colores de fondo */
.color-darkblue { background-color: var(--color-darkblue); } 
.color-lightgreen { background-color: var(--color-lightgreen); }
.color-tan { background-color: var(--color-tan); }
.color-lightblue { background-color: var(--color-lightblue); } 
.color-darkgreen { background-color: var(--color-darkgreen); } 
.color-red { background-color: var(--color-red); } 
.color-orange { background-color: var(--color-orange); } 

/*
|--------------------------------------------------------------------------
| CONTENIDO INTERNO: MITADES EXACTAS 50/50
|--------------------------------------------------------------------------
*/

.step-content-container {
    display: flex;
    width: 100%; 
    height: 100%;
}

.step-half {
    flex: 0 0 50%; 
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    padding: 0;
}

.order-1 { order: 1; }
.order-2 { order: 2; }

/* --- Lado de la IMAGEN --- */
.step-image-side {
    position: relative;
    overflow: hidden;
    opacity: 1; 
}

.step-image {
    width: 100%;
    height: 100%;
    object-fit: cover; 
    display: block;
}

/* --- Lado del Texto y Tipograf칤a --- */

.step-text-side {
    flex-direction: column;
    padding: 0 30px; 
    z-index: 10; 
}

.step-text-details {
    max-width: 350px; 
    padding: 40px 0;
    text-align: left; 
}

/* AJUSTE: Hacer que el texto STEP 1/2/etc. sea m치s grande y resalte */
.step-small-title {
    font-size: 1.5rem; 
    font-weight: 700; 
    color: var(--text-color-accent); 
    margin-bottom: 15px;
    letter-spacing: 3px; 
    text-transform: uppercase;
}

.step-description {
    font-size: 1.15rem; 
    line-height: 1.6;
    margin-bottom: 30px; 
    opacity: 0.9;
}

.step-title-alt {
    font-size: 2.5rem; 
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 0;
}

/*
|--------------------------------------------------------------------------
| L칍GICA DE COLOR DE TEXTO Y ALINEACI칍N ALTERNADA (MANTENIDOS)
|--------------------------------------------------------------------------
*/

/* --- L칍GICA DE COLOR (No se toca) --- */
.color-darkblue .step-text-side, .color-darkgreen .step-text-side,
.color-red .step-text-side, .color-orange .step-text-side {
    color: var(--text-color-light); 
}
.color-lightgreen .step-text-side, .color-tan .step-text-side,
.color-lightblue .step-text-side {
    color: var(--text-color-dark); 
}
.color-lightgreen .step-description, .color-tan .step-description,
.color-lightblue .step-description {
    color: var(--text-color-dark); 
    opacity: 0.7;
}

/* Pasos IMPARES */
.step-section:nth-child(odd) .step-text-side {
    justify-content: center;
    align-items: center; 
}
.step-section:nth-child(odd) .step-text-side .step-text-details {
    margin: 0; 
}

/* Pasos PARES */
.step-section:nth-child(even) .step-text-side {
    justify-content: center;
    align-items: center; 
}
.step-section:nth-child(even) .step-text-side .step-text-details {
    margin: 0;
}


/*
|--------------------------------------------------------------------------
| INDICADOR FIJO CENTRAL Y C칈RCULO (MANTENIDOS)
|--------------------------------------------------------------------------
*/

.fixed-step-indicator {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh; 
    pointer-events: none; 
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 50; 
}

/* T칤tulo de la Secci칩n "HOW IT ALL WORKS" */
.how-it-works-title {
    font-size: 2rem; 
    font-weight: 700;
    color: var(--title-fixed-color); 
    text-shadow: var(--title-fixed-shadow); 
    text-transform: uppercase;
    letter-spacing: 7px; 
    z-index: 55; 
    position: absolute;
    top: calc(50% + var(--indicator-size) / 2 + 150px); 
    left: 50%;
    transform: translate(-50%, 0); 
    text-align: center;
}

.step-circle-wrapper {
    position: absolute; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); 
    z-index: 60;
}

.step-number-circle {
    width: var(--indicator-size); 
    height: var(--indicator-size);
    border-radius: 50%;
    border: var(--border-size) solid rgba(255, 255, 255, 0.6); 
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    background: transparent; 
}

.step-number {
    font-size: 4.5rem;
    font-weight: 300;
    color: white;
    z-index: 70;
}

/*
|--------------------------------------------------------------------------
| CORRECCI칍N FINAL DE ALINEACI칍N DE PUNTOS
|--------------------------------------------------------------------------
*/
.dots-container {
    position: absolute;
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    pointer-events: none; 
}

.dot {
    position: absolute;
    width: var(--dot-size); 
    height: var(--dot-size); 
    background-color: rgba(255, 255, 255, 0.4); 
    border-radius: 50%;
    transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}

.dot-active {
    background-color: white !important; 
    box-shadow: 0 0 8px white;
}

/* 1. Centrar el punto en el centro del C칤rculo */
.dot {
    /* Posiciona el centro del punto exactamente en el centro del contenedor (50% de 250px = 125px) */
    top: calc(50% - var(--dot-size) / 2); 
    left: calc(50% - var(--dot-size) / 2); 
    
    /* El origen de la rotaci칩n es el centro del propio punto */
    transform-origin: center;
}

/* 2. Definir la POSICI칍N y ROTACI칍N combinadas para CADA punto.
   (Traslaci칩n a la 칩rbita + Rotaci칩n a la posici칩n final)
*/
.dot-1 { 
    transform: rotate(0deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-2 { 
    transform: rotate(51.4deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-3 { 
    transform: rotate(102.8deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-4 { 
    transform: rotate(154.2deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-5 { 
    transform: rotate(205.6deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-6 { 
    transform: rotate(257deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}
.dot-7 { 
    transform: rotate(308.4deg) 
               translateY(calc(-1 * var(--dot-orbit-distance))); 
}

/* 3. Estado activo. Mantenemos la traslaci칩n y rotaci칩n y A칌ADIMOS la escala. */
.dot-1.dot-active { 
    transform: 
        rotate(0deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-2.dot-active { 
    transform: 
        rotate(51.4deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-3.dot-active { 
    transform: 
        rotate(102.8deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-4.dot-active { 
    transform: 
        rotate(154.2deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-5.dot-active { 
    transform: 
        rotate(205.6deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-6.dot-active { 
    transform: 
        rotate(257deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}
.dot-7.dot-active { 
    transform: 
        rotate(308.4deg) 
        translateY(calc(-1 * var(--dot-orbit-distance))) 
        scale(var(--dot-scale-factor)) !important; 
}

/*
|--------------------------------------------------------------------------
| CONFIGURACI칍N BASE Y VARIABLES
|--------------------------------------------------------------------------
*/

/* ... (El bloque :root se mantiene sin cambios) ... */

html {
    /* 1. Asegura que el elemento ra칤z ocupe la altura de la ventana */
    height: 100%; 
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Montserrat', sans-serif; 
    overflow-x: hidden;
    background-color: #f8f8f8;
    
    /* 游 CORRECCI칍N CLAVE 1: 춰DEBES A칌ADIR HEIGHT: 100%! */
    height: 100%; 

    /* 游눤 2. ESTO FUERZA AL NAVEGADOR A DETENERSE EN PUNTOS FIJOS 游눤 */
    scroll-snap-type: y mandatory;
}

/*
|--------------------------------------------------------------------------
| SECCIONES DE SCROLL, CONTENIDO Y L칍GICA DE COLOR (MANTENIDOS)
|--------------------------------------------------------------------------
*/
.how-it-works-page {
    position: relative;
    width: 100%;
    min-height: 700vh; 
    /* scroll-snap-type ELIMINADO CORRECTAMENTE de aqu칤. */
}

/* ... (contin칰a el c칩digo .steps-container) ... */

.step-section {
    height: 100vh; 
    display: flex;
    position: relative;
    margin: 0; 
    overflow: hidden;
    
    /* 3. Punto de anclaje forzado */
    scroll-snap-align: start; 
}

/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tabletas y dispositivos medianos (max-width: 1024px) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px; /* Reducir el tama침o del c칤rculo */
        --dot-offset: 100px;     /* Nuevo radio del c칤rculo */
        --dot-size: 20px;        /* Reducir el tama침o del punto */
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); /* Ajustar posici칩n */
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px; /* Reducir el tama침o del c칤rculo */
        --dot-offset: 100px;     /* Nuevo radio del c칤rculo */
        --dot-size: 20px;        /* Reducir el tama침o del punto */
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); /* Ajustar posici칩n */
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* (Mantiene el indicador fijo, pero lo hace m치s peque침o) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px; /* Reducir el tama침o del c칤rculo */
        --dot-offset: 100px;     /* Nuevo radio del c칤rculo */
        --dot-size: 20px;        /* Reducir el tama침o del punto */
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); 
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px;
        --dot-offset: 100px;
        --dot-size: 20px;
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); 
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* (Se mantiene el indicador fijo m치s peque침o) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px;
        --dot-offset: 100px;
        --dot-size: 20px;
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); 
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* (Se mantiene el indicador fijo m치s peque침o) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* 1. Ajuste de Variables para el Indicador Fijo */
    :root {
        --indicator-size: 200px;
        --dot-offset: 100px;
        --dot-size: 20px;
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    /* 2. Ajuste de Contenido de Texto */
    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    /* 3. Ajuste del T칤tulo Fijo */
    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); 
    }
}


/*
  =======================================
  RESPONSIVE DESIGN: TABLETS Y CELULARES
  =======================================
*/

/* ---------------------------------------------------- */
/* MEDIA QUERY: Tablets y dispositivos medianos (max-width: 1024px) */
/* ---------------------------------------------------- */
@media (max-width: 1024px) {
    /* (Se mantienen los ajustes de Tabletas) */
    :root {
        --indicator-size: 200px;
        --dot-offset: 100px;
        --dot-size: 20px;
        --dot-scale-factor: 1.4;
        --dot-orbit-distance: calc(var(--dot-offset) - (var(--dot-size) / 2) + 8px); 
    }

    .step-text-details {
        max-width: 320px;
        padding: 30px 0;
    }

    .step-small-title {
        font-size: 1.3rem; 
    }

    .step-title-alt {
        font-size: 2.2rem; 
    }

    .step-description {
        font-size: 1.1rem; 
    }

    .how-it-works-title {
        font-size: 1.8rem;
        letter-spacing: 5px;
        top: calc(50% + var(--indicator-size) / 2 + 100px); 
    }
}


/* ---------------------------------------------------- */
/* RESPONSIVE SMARTPHONES (max-width: 767px) */
/* ---------------------------------------------------- */
@media (max-width: 767px) {

    /* Desactivar scroll-snap en m칩vil */
    body {
        scroll-snap-type: none !important;
    }

    .how-it-works-page {
        min-height: auto !important;
    }

    /* Cada step ahora se apila verticalmente */
    .step-section {
        height: auto !important;
        min-height: auto !important;
        display: flex !important;
        flex-direction: column !important;
        padding: 0 !important;
        overflow: visible !important; /* 游녤 CORRECCI칍N CLAVE */
    }

    .step-content-container {
        display: flex !important;
        flex-direction: column !important;
        width: 100% !important;
        height: auto !important;
    }

    /* Ocultar indicador */
    .fixed-step-indicator,
    .how-it-works-title {
        display: none !important;
    }

    /* TEXTO ARRIBA */
    .step-half.step-text-side {
        order: 1 !important;
        width: 100% !important;
        padding: 40px 20px !important;
        height: auto !important;
        min-height: auto !important;
        display: flex !important;
        justify-content: center !important;
        text-align: center !important;
    }

    /* IMAGEN ABAJO */
    .step-half.step-image-side {
        order: 2 !important;
        width: 100% !important;
        height: auto !important;
        min-height: 250px !important;
        max-height: 400px !important;
        overflow: hidden !important; /* asegura visibilidad sin recortes */
    }

    .step-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        display: block !important;
    }

    /* Tipograf칤a */
    .step-title-alt {
        font-size: 1.7rem !important;
    }

    .step-description {
        font-size: 1rem !important;
        margin-bottom: 20px !important;
    }
}